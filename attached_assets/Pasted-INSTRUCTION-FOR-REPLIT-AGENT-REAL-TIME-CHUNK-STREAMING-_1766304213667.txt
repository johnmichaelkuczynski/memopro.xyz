INSTRUCTION FOR REPLIT AGENT: REAL-TIME CHUNK STREAMING

REQUIREMENT: Display each chunk to the user immediately upon completion.
Users cannot wait 30-60 minutes for a final output that might be wrong. They need to see progress in real-time and be able to abort early if quality is poor.
IMPLEMENTATION:

Stream chunks to UI as they complete:

javascript// After each chunk is processed and saved to database:
await db.reconstruction_chunks.update({
    id: chunk.id,
    chunk_output_text: outputText,
    actual_words: actualWords,
    status: 'complete'
});

// IMMEDIATELY emit to frontend via websocket or SSE
socket.emit('chunk_complete', {
    jobId: job.id,
    chunkIndex: chunk.chunk_index,
    totalChunks: job.num_chunks,
    chunkText: outputText,
    actualWords: actualWords,
    targetWords: chunk.target_words,
    runningTotal: await getRunningWordCount(job.id)
});
```

2. **Frontend displays chunks incrementally:**
```
═══════════════════════════════════════════════════
Processing: Chunk 7 of 72 | Words: 4,847 / 15,000 target
═══════════════════════════════════════════════════

[Chunk 1 output displayed here...]

[Chunk 2 output displayed here...]

[Chunk 3 output displayed here...]

...

[Chunk 7 output just appeared...]

⏳ Processing chunk 8...
```

3. **Show running statistics:**
```
Progress: 7/72 chunks (9.7%)
Words so far: 4,847
Target: 15,000
Projected final: 14,820 words ✓ (on track)
Time elapsed: 4m 32s
Est. remaining: 42m

Allow user to ABORT at any time:

javascript// User clicks "Stop Processing"
socket.emit('abort_job', { jobId: job.id });

// Backend handles abort
async function abortJob(jobId) {
    await db.reconstruction_jobs.update({
        id: jobId,
        status: 'aborted',
        updated_at: new Date()
    });
    
    // Return partial output (all completed chunks)
    const completedChunks = await db.reconstruction_chunks.find({
        job_id: jobId,
        status: 'complete'
    }).orderBy('chunk_index');
    
    const partialOutput = completedChunks.map(c => c.chunk_output_text).join('\n\n');
    
    return {
        status: 'aborted',
        completedChunks: completedChunks.length,
        totalChunks: job.num_chunks,
        partialOutput: partialOutput,
        wordCount: countWords(partialOutput)
    };
}
```

5. **Visual quality indicators per chunk:**
```
Chunk 7: ✓ 289 words (target: 280-320) — ON TARGET
Chunk 8: ⚠️ 187 words (target: 280-320) — RETRYING...
Chunk 8: ✓ 301 words (target: 280-320) — PASSED AFTER RETRY
Chunk 9: ✗ 142 words (target: 280-320) — FAILED, FLAGGED FOR REVIEW
```

6. **Early warning if projections are off:**
```
⚠️ WARNING: After 20 chunks, running word count is 4,100.
   Projected final: 9,225 words
   Target: 15,000 words
   System is under-producing by ~38%
   
   [Continue Anyway] [Abort] [Restart with Adjusted Settings]
WHY THIS MATTERS:

User sees quality immediately — can abort after 3 chunks if output is garbage
User sees pacing — knows the system is actually working, not hung
User sees projections — knows whether final output will hit target
User doesn't waste 45 minutes on a failed run
Builds trust — transparency shows the system is doing real work

TECHNICAL OPTIONS:

WebSocket (recommended) — bidirectional, real-time
Server-Sent Events (SSE) — simpler, one-directional streaming
Polling — fallback if WebSocket/SSE unavailable (poll every 5 seconds)

DO NOT wait until all chunks are complete to show anything. Each chunk must appear within 2 seconds of completion.